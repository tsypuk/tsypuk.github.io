<!doctype html><html lang="en" ><head> <script async src="https://www.googletagmanager.com/gtag/js?id=G-LXECFRDHS1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-LXECFRDHS1'); </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="DynamoDB Table Design Principles - One-To-Many Relationships in NoSQL | by Roman Tsypuk" /><meta name="author" content="Roman Tsypuk" /><meta property="og:locale" content="en" /><meta name="description" content="In Relational Database we used to have single Entity per Table, build relationships between them and assign constrains like Foreign Keys. In NoSQL DynamoDB world this became an Antipattern, many engineers follow same concept introducing multiple DynamoDB Table per each Entity type. Also in NoSQL DynamoDB world there are no JOIN operations and this is a BIG challenge when switching the mindset from RDBMS." /><meta property="og:description" content="In Relational Database we used to have single Entity per Table, build relationships between them and assign constrains like Foreign Keys. In NoSQL DynamoDB world this became an Antipattern, many engineers follow same concept introducing multiple DynamoDB Table per each Entity type. Also in NoSQL DynamoDB world there are no JOIN operations and this is a BIG challenge when switching the mindset from RDBMS." /><meta property="twitter:description" content="In Relational Database we used to have single Entity per Table, build relationships between them and assign constrains like Foreign Keys. In NoSQL DynamoDB world this became an Antipattern, many engineers follow same concept introducing multiple DynamoDB Table per each Entity type. Also in NoSQL DynamoDB world there are no JOIN operations and this is a BIG challenge when switching the mindset from RDBMS." /><link rel="canonical" href="https://tsypuk.github.io/posts/2023/10/04/dynamo-one-to-many.html" /><meta property="og:url" content="https://tsypuk.github.io/posts/2023/10/04/dynamo-one-to-many.html" /><meta property="og:site_name" content="Engineer’s Notes | Roman Tsypuk" /><meta property="og:image" content="https://tsypuk.github.io/images/banners/1200/pexels-reg-hawes-7284174.jpeg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-10-04T17:00:00+03:00" /><meta name="publish_date" property="og:publish_date" content="2023-10-04T17:00:00+03:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://tsypuk.github.io/images/banners/1200/pexels-reg-hawes-7284174.jpeg" /><meta property="twitter:title" content="DynamoDB Table Design Principles - One-To-Many Relationships in NoSQL | by Roman Tsypuk" /><meta name="twitter:site" content="@roman_tsypuk" /><meta name="twitter:creator" content="@roman_tsypuk" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Roman Tsypuk"},"dateModified":"2025-07-20T17:36:47+03:00","datePublished":"2023-10-04T17:00:00+03:00","description":"In Relational Database we used to have single Entity per Table, build relationships between them and assign constrains like Foreign Keys. In NoSQL DynamoDB world this became an Antipattern, many engineers follow same concept introducing multiple DynamoDB Table per each Entity type. Also in NoSQL DynamoDB world there are no JOIN operations and this is a BIG challenge when switching the mindset from RDBMS.","headline":"DynamoDB Table Design Principles - One-To-Many Relationships in NoSQL","image":"https://tsypuk.github.io/images/banners/1200/pexels-reg-hawes-7284174.jpeg","mainEntityOfPage":{"@type":"WebPage","@id":"https://tsypuk.github.io/posts/2023/10/04/dynamo-one-to-many.html"},"url":"https://tsypuk.github.io/posts/2023/10/04/dynamo-one-to-many.html"}</script><title>DynamoDB Table Design Principles - One-To-Many Relationships in NoSQL | Engineer's Notes</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Engineer's Notes"><meta name="application-name" content="Engineer's Notes"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js,npm/mermaid@11.4.0/dist/mermaid.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-LXECFRDHS1"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-LXECFRDHS1'); }); </script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/images/avatar/rtsypuk.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">Engineer's Notes</a><p class="site-subtitle fst-italic mb-0">Cloud, Infrastructure, Architecture, Networking</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories.html" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags.html" class="nav-link"> <i class="fa-fw fas fa-tag"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archived_posts.html" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/roman_tsypuk.html" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/tsypuk" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/roman_tsypuk" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/roman-tsypuk" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['tsypuk_conf','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>DynamoDB Table Design Principles - One-To-Many Relationships in NoSQL</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link" aria-label="Search"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>DynamoDB Table Design Principles - One-To-Many Relationships in NoSQL</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1696428000" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Oct 4, 2023 </time> </span> <span> Updated <time data-ts="1753022207" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jul 20, 2025 </time> </span><div class="mt-3 mb-3"> <a href="/images/banners/1200/pexels-reg-hawes-7284174.jpeg" class="popup img-link preview-img shimmer"><img src="/images/banners/1200/pexels-reg-hawes-7284174.jpeg" alt="Preview Image" width="1200" height="630" loading="lazy"></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://www.linkedin.com/in/roman-tsypuk">Roman Tsypuk</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="787 words" > <em>4 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">DynamoDB Table Design Principles - One-To-Many Relationships in NoSQL</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">DynamoDB Table Design Principles - One-To-Many Relationships in NoSQL</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><h2 id="abstract"><span class="me-2">Abstract</span><a href="#abstract" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>In Relational Database we used to have single Entity per Table, build relationships between them and assign constrains like Foreign Keys. In NoSQL DynamoDB world this became an Antipattern, many engineers follow same concept introducing multiple DynamoDB Table per each Entity type. Also in NoSQL DynamoDB world there are no JOIN operations and this is a BIG challenge when switching the mindset from RDBMS.</p><p>There are several technics to design 1-to-many relation in the DynamoDB, in this post we will take a deep dive view on the following patterns:</p><ul><li>Embedded Collections<li>Single Table</ul><h2 id="target-dynamodb-table-structure"><span class="me-2">Target DynamoDB Table Structure</span><a href="#target-dynamodb-table-structure" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href="/images/posts/dynamo/diagram2.png" class="popup img-link w-100 center shimmer"><img src="/images/posts/dynamo/diagram2.png" alt="diagram2.png" width="100%" loading="lazy"></a></p><p>NoSQL DynamoDB Table Structure is generated using <a href="https://blog.tsypuk.github.io/multicloud-diagrams/">MultiCloud Diagrams Framework</a></p><h2 id="entity-relationship-diagram-edr"><span class="me-2">Entity-Relationship-Diagram EDR</span><a href="#entity-relationship-diagram-edr" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><pre><code class="language-mermaid">erDiagram
  USERS ||--o{ USER_ADDRESS: has
  USERS ||--o{ ORDERS: creates
  ORDERS ||--o{ ORDER_ITEMS: has
  USERS {
    string username
    string full_name
    string email
    string date_of_birth
    string created_at
  }
  USER_ADDRESS {
    string username
    string street_address
    string postal_code
    string state
    int country_code
  }
  ORDERS {
    string username
    string order_id
    string user_address
    string created_at
  }
  ORDER_ITEMS {
    uuid item_id
    string order_id
    string product_name
    int price
    string status
    int quality
  }
</code></pre><h2 id="define-access-patterns"><span class="me-2">Define Access Patterns</span><a href="#define-access-patterns" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Once Entities are defined we need to define Access Pattern. Usually they are defined according to UI navigation components or other backend systems that are accessing our storage level.</p><div class="table-wrapper"><table><thead><tr><th style="text-align: left">ID<th style="text-align: left">Access Pattern<tbody><tr><td style="text-align: left">A1<td style="text-align: left">Get user profile<tr><td style="text-align: left">A2<td style="text-align: left">Get orders for user<tr><td style="text-align: left">A3<td style="text-align: left">Get single order and order items<tr><td style="text-align: left">A4<td style="text-align: left">Get orders for user by status<tr><td style="text-align: left">A5<td style="text-align: left">Get open orders</table></div><h2 id="table-design"><span class="me-2">Table design</span><a href="#table-design" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="define-the-core-entity-in-the-relationships"><span class="me-2">Define the Core Entity in the Relationships</span><a href="#define-the-core-entity-in-the-relationships" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>There are 4 Entities in our EDR, we need to choose Core Entity - User is the best candidate.</p><h3 id="design-your-primary-keys--secondary-indexes"><span class="me-2">Design your primary keys &amp; secondary indexes</span><a href="#design-your-primary-keys--secondary-indexes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>Compound Key consists of <strong>PK</strong> and <strong>SK</strong> naming, should be <strong>standardized</strong>, because we will store multiple different entities in the same table so accessed keys <strong>should follow same naming convention</strong><li><p>Because a table stores not only a single entity type - we will add prefix with Entity type <strong>USER#ID</strong> to <strong>PK</strong> and <strong>#PROFILE#id</strong> to <strong>SK</strong></p><li>This prevents from a possible collision of same ID repeatable in different entities.</ul><p><a href="/images/posts/dynamo/user_table.png" class="popup img-link shimmer"><img src="/images/posts/dynamo/user_table.png" alt="img_10.png" loading="lazy"></a></p><h3 id="entity-chart"><span class="me-2">Entity Chart</span><a href="#entity-chart" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="table-wrapper"><table><thead><tr><th>Entity<th>PK<th>SK<tbody><tr><td>User<td>User#username<td>#PROFILE#username</table></div><h2 id="one-to-many-relationships-mapping"><span class="me-2">One-To-Many relationships mapping</span><a href="#one-to-many-relationships-mapping" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="user-to-addresses-relationship"><span class="me-2">User-to-Addresses RelationShip</span><a href="#user-to-addresses-relationship" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="technic-1-using-embedded-collections"><span class="me-2">Technic #1: Using Embedded Collections</span><a href="#technic-1-using-embedded-collections" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>users -&gt; user_address</strong></p><p>Since there are no access patterns to fetch user by Address, or fetch the Address directly,</p><p>Number of single user addresses is bounded (it is a small number).</p><p>We can denormalize the Addresses and inject them into every User Item as a dedicated attribute of Collection (Map or List).</p><p><a href="/images/posts/dynamo/address_denormolize.png" class="popup img-link shimmer"><img src="/images/posts/dynamo/address_denormolize.png" alt="img_10.png" loading="lazy"></a></p><blockquote class="prompt-tip"><p>Denormalize Data and put into a document as Embedded Collection</p></blockquote><h4 id="entity-chart-1"><span class="me-2">Entity Chart</span><a href="#entity-chart-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="table-wrapper"><table><thead><tr><th>Entity<th>PK<th>SK<tbody><tr><td>User<td>User#username<td>#PROFILE#username<tr><td>UserAddress<td>N/A<td>N/A</table></div><div class="table-wrapper"><table><thead><tr><th style="text-align: left">ID<th style="text-align: left">Access Pattern<th style="text-align: left">Access BY<th style="text-align: left">Key Condition<tbody><tr><td style="text-align: left">A1<td style="text-align: left">Get user profile<td style="text-align: left">username<td style="text-align: left">PK = USER#alex AND BEGINS_WITH(SK, ‘PROFILE’)”</table></div><h3 id="user-to-orders-relationship"><span class="me-2">User-to-Orders RelationShip</span><a href="#user-to-orders-relationship" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="technic-2-single-table-for-entities"><span class="me-2">Technic #2: Single Table for Entities</span><a href="#technic-2-single-table-for-entities" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><strong>users -&gt; orders</strong> is district from previous example</p><p>Non-bounded number of <strong>Orders</strong> for a <strong>User</strong></p><p>To distinguish Orders we populate compound key with <strong>ORDER#orderid</strong> for <strong>SK</strong> and <strong>USER#userid</strong> for <strong>PK</strong></p><h4 id="entity-chart-2"><span class="me-2">Entity Chart</span><a href="#entity-chart-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="table-wrapper"><table><thead><tr><th>Entity<th>PK<th>SK<tbody><tr><td>User<td>User#username<td>#PROFILE#username<tr><td>UserAddress<td>N/A<td>N/A<tr><td>Order<td>USER#username<td>ORDER#orderid</table></div><p>Now different Entity types will have different attributes.</p><p>Also, Users &amp; Orders - have same PK they will be within the same partition in the storage.</p><p><a href="/images/posts/dynamo/single_table_entities.png" class="popup img-link shimmer"><img src="/images/posts/dynamo/single_table_entities.png" alt="img_10.png" loading="lazy"></a></p><h4 id="query"><span class="me-2">Query</span><a href="#query" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><code class="language-plaintext highlighter-rouge">"PK = USER#alex AND BEGINS_WITH(SK, 'ORDER#')"</code></p><div class="table-wrapper"><table><thead><tr><th style="text-align: left">ID<th style="text-align: left">Access Pattern<th style="text-align: left">Access BY<th style="text-align: left">Key Condition<tbody><tr><td style="text-align: left">A1<td style="text-align: left">Get user profile<td style="text-align: left">username<td style="text-align: left">PK = USER#alex AND BEGINS_WITH(SK, ‘PROFILE’)”<tr><td style="text-align: left">A2<td style="text-align: left">Get orders for user<td style="text-align: left">BY username<td style="text-align: left">PK = USER#alex AND BEGINS_WITH(SK, ‘ORDER#’)”<tr><td style="text-align: left">A3<td style="text-align: left">Get single order and order items<td style="text-align: left">GSI: orderid<td style="text-align: left">SK = ORDER#orderid</table></div><h3 id="order-to-orderitems-relationship"><span class="me-2">Order-to-OrderItems RelationShip</span><a href="#order-to-orderitems-relationship" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>orders -&gt; order_items</strong></p><p>We can not reuse same technic because Orders are already a one part of other relationship to users.</p><p>Now we will introduce <strong>PK</strong> <strong>ITEM#itemid</strong> and <strong>SK</strong> <strong>ORDER#orderid</strong></p><h4 id="entity-chart-3"><span class="me-2">Entity Chart</span><a href="#entity-chart-3" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="table-wrapper"><table><thead><tr><th>Entity<th>PK<th>SK<tbody><tr><td>User<td>User#username<td>#PROFILE#username<tr><td>UserAddress<td>N/A<td>N/A<tr><td>Order<td>USER#username<td>ORDER#orderid<tr><td>Order Item<td>ITEM#itemid<td>ORDER#orderid</table></div><p><a href="/images/posts/dynamo/items_to_pk.png" class="popup img-link shimmer"><img src="/images/posts/dynamo/items_to_pk.png" alt="items_to_pk.png" loading="lazy"></a> Important note that <strong>SK</strong> is the same for Order and OrderItems</p><h3 id="technic-3-use-inverted-index"><span class="me-2">Technic #3: Use Inverted Index</span><a href="#technic-3-use-inverted-index" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>For composite Key we will flip PK and SK and introduce the GSI, creating the inverted index.</p><p><a href="/images/posts/dynamo/inverted_gsi.png" class="popup img-link shimmer"><img src="/images/posts/dynamo/inverted_gsi.png" alt="inverted index.png" loading="lazy"></a></p><h4 id="query-the-index"><span class="me-2">Query the Index</span><a href="#query-the-index" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p><code class="language-plaintext highlighter-rouge">"SK = ORDER#orderid"</code> - will return the ORDER Entity and all ORDER ITEMS - this is analogue of JOIN SQL operation on FK ORDERID.</p><div class="table-wrapper"><table><thead><tr><th style="text-align: left">ID<th style="text-align: left">Access Pattern<th style="text-align: left">Access BY<th style="text-align: left">Key Condition<tbody><tr><td style="text-align: left">A1<td style="text-align: left">Get user profile<td style="text-align: left">username<td style="text-align: left">PK = USER#alex AND BEGINS_WITH(SK, ‘PROFILE’)”<tr><td style="text-align: left">A2<td style="text-align: left">Get orders for user<td style="text-align: left">BY username<td style="text-align: left">PK = USER#alex AND BEGINS_WITH(SK, ‘ORDER#’)”<tr><td style="text-align: left">A3<td style="text-align: left">Get single order and order items<td style="text-align: left">GSI: orderid<td style="text-align: left">SK = ORDER#orderid</table></div><p>We will complete last 2 Access Patterns in next Post, when will review in details Filter Expressions in DynamoDB.</p><h2 id="references-links"><span class="me-2">References (Links)</span><a href="#references-links" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><a href="/posts/2023/10/02/dynamo-design.html">DynamoDB Table Design Principles - NoSQL Modeling</a><li><a href="/posts/2023/10/06/dynamo-filters.html">DynamoDB Table Design Principles - Filtering</a><li><a href="https://github.com/tsypuk/samples/tree/main/dynamodb-one-to-many">GitHub Sample CloudFormation and NoSQL Workbench exports for One-To-Many</a><li><a href="https://www.youtube.com/watch?v=DIQVJqiSUkE">Alex Debrie Talk on re:Invent 2019 Data modeling with Amazon DynamoDB (CMY304)</a><li><a href="https://blog.tsypuk.github.io/multicloud-diagrams/">Multicloud Diagrams</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/aws/">aws</a>, <a href="/categories/dynamodb/">dynamodb</a>, <a href="/categories/nosql/">nosql</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/aws/" class="post-tag no-text-decoration" >aws</a> <a href="/tags/dynamodb/" class="post-tag no-text-decoration" >dynamodb</a> <a href="/tags/nosql/" class="post-tag no-text-decoration" >nosql</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=DynamoDB%20Table%20Design%20Principles%20-%20One-To-Many%20Relationships%20in%20NoSQL%20-%20Engineer's%20Notes&url=https%3A%2F%2Ftsypuk.github.io%2Fposts%2F2023%2F10%2F04%2Fdynamo-one-to-many.html" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=DynamoDB%20Table%20Design%20Principles%20-%20One-To-Many%20Relationships%20in%20NoSQL%20-%20Engineer's%20Notes&u=https%3A%2F%2Ftsypuk.github.io%2Fposts%2F2023%2F10%2F04%2Fdynamo-one-to-many.html" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Ftsypuk.github.io%2Fposts%2F2023%2F10%2F04%2Fdynamo-one-to-many.html&text=DynamoDB%20Table%20Design%20Principles%20-%20One-To-Many%20Relationships%20in%20NoSQL%20-%20Engineer's%20Notes" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ftsypuk.github.io%2Fposts%2F2023%2F10%2F04%2Fdynamo-one-to-many.html" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/2025/09/26/multiagnet-n8n-bedrock.html">Orchestrating AI multi-agent infrastructure with AWS Bedrock, OpenAI and n8n</a><li class="text-truncate lh-lg"> <a href="/posts/2025/07/20/elastic-cache-vector.html">Amazon ElastiCache Redis as a Vector Embeddings Storage for Semantic Search in AWS Community Blog posts</a><li class="text-truncate lh-lg"> <a href="/posts/2025/09/17/duckdb-s3.html">Running analytics queries from your machine with Zero-BigData stack needed on top of AWS S3(compressed JSON, Parquet, csv) or other DataSources</a><li class="text-truncate lh-lg"> <a href="/posts/2023/10/02/dynamo-design.html">DynamoDB Table Design Principles - NoSQL Modeling</a><li class="text-truncate lh-lg"> <a href="/posts/2023/10/04/dynamo-one-to-many.html">DynamoDB Table Design Principles - One-To-Many Relationships in NoSQL</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/aws/">aws</a> <a class="post-tag btn btn-outline-primary" href="/tags/dynamodb/">dynamodb</a> <a class="post-tag btn btn-outline-primary" href="/tags/git/">git</a> <a class="post-tag btn btn-outline-primary" href="/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/tags/s3/">s3</a> <a class="post-tag btn btn-outline-primary" href="/tags/ecs/">ecs</a> <a class="post-tag btn btn-outline-primary" href="/tags/network/">network</a> <a class="post-tag btn btn-outline-primary" href="/tags/cli/">cli</a> <a class="post-tag btn btn-outline-primary" href="/tags/fargate/">fargate</a> <a class="post-tag btn btn-outline-primary" href="/tags/firehose/">firehose</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/2023/10/06/dynamo-filters.html" class="post-preview card h-100"><div class="card-body"> <time data-ts="1696600800" data-df="ll" > Oct 6, 2023 </time><h4 class="pt-0 my-2">DynamoDB Table Design Principles - Filtering</h4><div class="text-muted"><p>Abstract We will continue exploring different technics that allow to extend Access Patterns to a Single Table. Target DynamoDB Table Structure NoSQL DynamoDB Table Structure is generated usi...</p></div></div></a></article><article class="col"> <a href="/posts/2023/10/02/dynamo-design.html" class="post-preview card h-100"><div class="card-body"> <time data-ts="1696255200" data-df="ll" > Oct 2, 2023 </time><h4 class="pt-0 my-2">DynamoDB Table Design Principles - NoSQL Modeling</h4><div class="text-muted"><p>Abstract DynamoDB is one of the most popular NoSQL DB storages, that has amazing performance and scaling characteristics and is widely used in many designs. There is mindshift that requires us to ...</p></div></div></a></article><article class="col"> <a href="/posts/2024/09/21/aws-nuke.html" class="post-preview card h-100"><div class="card-body"> <time data-ts="1726869600" data-df="ll" > Sep 21, 2024 </time><h4 class="pt-0 my-2">AWS-nuke controlled resources cleanup in multiple aws accounts</h4><div class="text-muted"><p>AWS-Nuke is an open-source tool, designed to automate the removal of AWS resources from an account. It can be used to quickly and safely delete all resources in a given AWS account, or it can be cu...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/2023/10/02/dynamo-design.html" class="btn btn-outline-primary" aria-label="Older" ><p>DynamoDB Table Design Principles - NoSQL Modeling</p></a> <a href="/posts/2023/10/06/dynamo-filters.html" class="btn btn-outline-primary" aria-label="Newer" ><p>DynamoDB Table Design Principles - Filtering</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://www.linkedin.com/in/roman-tsypuk">Roman Tsypuk</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span> <span data-bs-toggle="tooltip" data-bs-placement="top" title="2025-09-26 20:11:52 +0300 &#013;be60bb44e6416aa69b8fd68791db025be40c523c">Build version: be60bb4</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/aws/">aws</a> <a class="post-tag btn btn-outline-primary" href="/tags/dynamodb/">dynamodb</a> <a class="post-tag btn btn-outline-primary" href="/tags/git/">git</a> <a class="post-tag btn btn-outline-primary" href="/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/tags/s3/">s3</a> <a class="post-tag btn btn-outline-primary" href="/tags/ecs/">ecs</a> <a class="post-tag btn btn-outline-primary" href="/tags/network/">network</a> <a class="post-tag btn btn-outline-primary" href="/tags/cli/">cli</a> <a class="post-tag btn btn-outline-primary" href="/tags/fargate/">fargate</a> <a class="post-tag btn btn-outline-primary" href="/tags/firehose/">firehose</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'tsypuk/tsypuk.github.io', 'data-repo-id': 'R_kgDOIxaFiw', 'data-category': 'General', 'data-category-id': 'DIC_kwDOIxaFi84CUSfn', 'data-mapping': 'og:title', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'top', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{content}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
