<!doctype html><html lang="en" ><head> <script async src="https://www.googletagmanager.com/gtag/js?id=G-LXECFRDHS1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-LXECFRDHS1'); </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="Detecting objects on image with AWS rekognition and labeling them with OpenCV | by Roman Tsypuk" /><meta name="author" content="Roman Tsypuk" /><meta property="og:locale" content="en" /><meta name="description" content="Amazon Rekognition is a cloud-based image and video analysis service provided by Amazon Web Services (AWS). This powerful service enables developers to incorporate sophisticated computer vision capabilities into their applications without the need for extensive machine learning expertise. Amazon Rekognition makes it easy to analyze and extract valuable information from visual content, ranging from images to videos." /><meta property="og:description" content="Amazon Rekognition is a cloud-based image and video analysis service provided by Amazon Web Services (AWS). This powerful service enables developers to incorporate sophisticated computer vision capabilities into their applications without the need for extensive machine learning expertise. Amazon Rekognition makes it easy to analyze and extract valuable information from visual content, ranging from images to videos." /><meta property="twitter:description" content="Amazon Rekognition is a cloud-based image and video analysis service provided by Amazon Web Services (AWS). This powerful service enables developers to incorporate sophisticated computer vision capabilities into their applications without the need for extensive machine learning expertise. Amazon Rekognition makes it easy to analyze and extract valuable information from visual content, ranging from images to videos." /><link rel="canonical" href="https://tsypuk.github.io/posts/2023/11/15/recognition.html" /><meta property="og:url" content="https://tsypuk.github.io/posts/2023/11/15/recognition.html" /><meta property="og:site_name" content="Engineerâ€™s Notes | Roman Tsypuk" /><meta property="og:image" content="https://tsypuk.github.io/images/banners/1200/pexels-cottonbro-studio-8369520.jpeg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-11-15T16:00:00+02:00" /><meta name="publish_date" property="og:publish_date" content="2023-11-15T16:00:00+02:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://tsypuk.github.io/images/banners/1200/pexels-cottonbro-studio-8369520.jpeg" /><meta property="twitter:title" content="Detecting objects on image with AWS rekognition and labeling them with OpenCV | by Roman Tsypuk" /><meta name="twitter:site" content="@roman_tsypuk" /><meta name="twitter:creator" content="@roman_tsypuk" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Roman Tsypuk"},"dateModified":"2024-02-25T18:38:06+02:00","datePublished":"2023-11-15T16:00:00+02:00","description":"Amazon Rekognition is a cloud-based image and video analysis service provided by Amazon Web Services (AWS). This powerful service enables developers to incorporate sophisticated computer vision capabilities into their applications without the need for extensive machine learning expertise. Amazon Rekognition makes it easy to analyze and extract valuable information from visual content, ranging from images to videos.","headline":"Detecting objects on image with AWS rekognition and labeling them with OpenCV","image":"https://tsypuk.github.io/images/banners/1200/pexels-cottonbro-studio-8369520.jpeg","mainEntityOfPage":{"@type":"WebPage","@id":"https://tsypuk.github.io/posts/2023/11/15/recognition.html"},"url":"https://tsypuk.github.io/posts/2023/11/15/recognition.html"}</script><title>Detecting objects on image with AWS rekognition and labeling them with OpenCV | Engineer's Notes</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Engineer's Notes"><meta name="application-name" content="Engineer's Notes"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-LXECFRDHS1"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-LXECFRDHS1'); }); </script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/images/avatar/rtsypuk.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">Engineer's Notes</a><p class="site-subtitle fst-italic mb-0">Cloud, Infrastructure, Architecture, Networking</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories.html" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags.html" class="nav-link"> <i class="fa-fw fas fa-tag"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archived_posts.html" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/roman_tsypuk.html" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/tsypuk" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/roman_tsypuk" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/roman-tsypuk" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['tsypuk_conf','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>Detecting objects on image with AWS rekognition and labeling them with OpenCV</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link" aria-label="Search"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>Detecting objects on image with AWS rekognition and labeling them with OpenCV</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1700056800" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Nov 15, 2023 </time> </span> <span> Updated <time data-ts="1708879086" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Feb 25, 2024 </time> </span><div class="mt-3 mb-3"> <a href="/images/banners/1200/pexels-cottonbro-studio-8369520.jpeg" class="popup img-link preview-img shimmer"><img src="/images/banners/1200/pexels-cottonbro-studio-8369520.jpeg" alt="Preview Image" width="1200" height="630" loading="lazy"></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://www.linkedin.com/in/roman-tsypuk">Roman Tsypuk</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1004 words" > <em>5 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">Detecting objects on image with AWS rekognition and labeling them with OpenCV</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">Detecting objects on image with AWS rekognition and labeling them with OpenCV</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><h2 id="abstract"><span class="me-2">Abstract</span><a href="#abstract" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Amazon Rekognition is a cloud-based image and video analysis service provided by Amazon Web Services (AWS). This powerful service enables developers to incorporate sophisticated computer vision capabilities into their applications without the need for extensive machine learning expertise. Amazon Rekognition makes it easy to analyze and extract valuable information from visual content, ranging from images to videos.</p><p>All the code snippets are prepared in a single Jupyter notebook that is shared at Links section.</p><h2 id="key-features"><span class="me-2">Key Features:</span><a href="#key-features" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>Object and Scene Detection<li>Facial Analysis and comparison<li>Text Detection<li>Content Moderation<li>Celebrity Recognition<li>Custom Labels based on user trained set</ul><h2 id="image-for-analysis"><span class="me-2">Image for analysis</span><a href="#image-for-analysis" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Letâ€™s take random picture of New York street, where multiple object are present - cars, city lights, buildings, pedestrians, etc.</p><p>We will use it to perform analysis with <code class="language-plaintext highlighter-rouge">aws rekognition</code>.</p><p><a href="https://raw.githubusercontent.com/tsypuk/samples/main/aws_hlml/rekognition/samp.jpeg" class="popup img-link shimmer"><img src="https://raw.githubusercontent.com/tsypuk/samples/main/aws_hlml/rekognition/samp.jpeg" alt="gf.jpeg" loading="lazy"></a></p><h2 id="uploading-the-image"><span class="me-2">Uploading the Image</span><a href="#uploading-the-image" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Service supports 2 modes of image uploading, the first case is when the image is in <code class="language-plaintext highlighter-rouge">S3</code>, it was uploaded and based on lifecycle rule rekognition logic was triggered - it is the most widely used scenario.</p><p>But also there is other option to send image as byte array without storing it in S3 - we will use this option.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre><span class="n">rekognition</span> <span class="o">=</span> <span class="n">boto3</span><span class="p">.</span><span class="nf">client</span><span class="p">(</span><span class="n">service_name</span><span class="o">=</span><span class="sh">'</span><span class="s">rekognition</span><span class="sh">'</span><span class="p">,</span> <span class="n">region_name</span><span class="o">=</span><span class="sh">'</span><span class="s">us-east-1</span><span class="sh">'</span><span class="p">)</span>

<span class="c1"># Read the image file
</span><span class="n">image_path</span> <span class="o">=</span> <span class="sh">'</span><span class="s">samp.jpeg</span><span class="sh">'</span>
<span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">image_path</span><span class="p">,</span> <span class="sh">'</span><span class="s">rb</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">image_file</span><span class="p">:</span>
  <span class="n">image_data</span> <span class="o">=</span> <span class="n">image_file</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span>

<span class="c1"># Call AWS Rekognition API to detect labels in the image
</span><span class="n">max_labels</span> <span class="o">=</span> <span class="mi">200</span>
<span class="n">min_confidence</span> <span class="o">=</span> <span class="mi">95</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">rekognition</span><span class="p">.</span><span class="nf">detect_labels</span><span class="p">(</span>
  <span class="n">Image</span><span class="o">=</span><span class="p">{</span>
    <span class="sh">'</span><span class="s">Bytes</span><span class="sh">'</span><span class="p">:</span> <span class="n">image_data</span>
  <span class="p">},</span>
  <span class="n">MaxLabels</span><span class="o">=</span><span class="n">max_labels</span><span class="p">,</span>  <span class="c1"># You can adjust this parameter based on your needs
</span>  <span class="n">MinConfidence</span><span class="o">=</span><span class="n">min_confidence</span>  <span class="c1"># You can adjust this parameter based on your needs
</span><span class="p">)</span>

<span class="nf">print</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="nf">dumps</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>

<span class="c1"># Print detected labels
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Detected labels:</span><span class="sh">"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="sh">'</span><span class="s">Labels</span><span class="sh">'</span><span class="p">]:</span>
  <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">label</span><span class="p">[</span><span class="sh">'</span><span class="s">Name</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="s"> (</span><span class="si">{</span><span class="n">label</span><span class="p">[</span><span class="sh">'</span><span class="s">Confidence</span><span class="sh">'</span><span class="p">]</span><span class="si">:</span><span class="p">.</span><span class="mi">2</span><span class="n">f</span><span class="si">}</span><span class="s">%)</span><span class="sh">"</span><span class="p">)</span>
</pre></table></code></div></div><p>As a result we can see the following table that gives a basic overview what is represented on the picture. I have aggregated information into the table with <code class="language-plaintext highlighter-rouge">category</code> name and <code class="language-plaintext highlighter-rouge">probability</code> of this category was on image.</p><div class="table-wrapper"><table><thead><tr><th>Category<th>Probability<tbody><tr><td>Building<td>(99.55%)<tr><td>Cityscape<td>(99.55%)<tr><td>Light<td>(99.42%)<tr><td>Traffic Light<td>(99.42%)<tr><td>Tarmac<td>(98.98%)<tr><td>Accessories<td>(97.87%)<tr><td>Bag<td>(97.87%)<tr><td>Handbag<td>(97.87%)<tr><td>Person<td>(97.64%)<tr><td>Car<td>(95.22%)<tr><td>Transportation<td>(95.22%)<tr><td>Vehicle<td>(95.22%)</table></div><h2 id="checking-the-response-details"><span class="me-2">Checking the response details</span><a href="#checking-the-response-details" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>The actual service response contains a lot of metadata, here is a single entity for <code class="language-plaintext highlighter-rouge">transport and logistics</code> only, but there are multiple JSON objects in response:</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
            </span><span class="nl">"Aliases"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="nl">"Categories"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Transport and Logistics"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"Confidence"</span><span class="p">:</span><span class="w"> </span><span class="mf">99.41839599609375</span><span class="p">,</span><span class="w">
            </span><span class="nl">"Instances"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"BoundingBox"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"Height"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.07998945564031601</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"Left"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.8064739108085632</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"Top"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.4241378605365753</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"Width"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.02277914620935917</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"Confidence"</span><span class="p">:</span><span class="w"> </span><span class="mf">99.41839599609375</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"BoundingBox"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"Height"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.03180865943431854</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"Left"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7512333393096924</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"Top"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6746096611022949</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"Width"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.010767364874482155</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="nl">"Confidence"</span><span class="p">:</span><span class="w"> </span><span class="mf">95.53616333007812</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Traffic Light"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"Parents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Light"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="err">,</span><span class="w">
</span></pre></table></code></div></div><p>The key element here is <code class="language-plaintext highlighter-rouge">BoundingBox</code> that has information about the area on source image where this Object was detected. By parsing this response in a loop we can add layer on top of source image with augmented rectangles to show objects that were detected.</p><blockquote class="prompt-tip"><p>Identifies the bounding box around the label, face, text, object of interest, or personal protective equipment. The left (x-coordinate) and top (y-coordinate) are coordinates representing the top and left sides of the bounding box. Note that the upper-left corner of the image is the origin (0,0).</p></blockquote><blockquote class="prompt-tip"><p>The top and left values returned are ratios of the overall image size. For example, if the input image is 700x200 pixels, and the top-left coordinate of the bounding box is 350x50 pixels, the API returns a left value of 0.5 (350/700) and a top value of 0.25 (50/200).</p></blockquote><blockquote class="prompt-tip"><p>The bounding box coordinates can have negative values. For example, if Amazon Rekognition is able to detect a face that is at the image edge and is only partially visible, the service can return coordinates that are outside the image bounds and, depending on the image edge, you might get negative values or values greater than 1 for the left or top values.</p></blockquote><h2 id="opencv-to-mark-detected-objects"><span class="me-2">OpenCV to mark detected objects</span><a href="#opencv-to-mark-detected-objects" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="n">image</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="nf">imread</span><span class="p">(</span><span class="sh">'</span><span class="s">samp.jpeg</span><span class="sh">'</span><span class="p">)</span>

<span class="nf">print</span><span class="p">(</span><span class="n">image</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="nf">print</span><span class="p">(</span><span class="n">image</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="sh">'</span><span class="s">Labels</span><span class="sh">'</span><span class="p">]:</span>
    <span class="k">if</span> <span class="sh">'</span><span class="s">Instances</span><span class="sh">'</span> <span class="ow">in</span> <span class="n">label</span><span class="p">:</span>
        <span class="n">red</span> <span class="o">=</span> <span class="n">random</span><span class="p">.</span><span class="nf">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
        <span class="n">green</span> <span class="o">=</span> <span class="n">random</span><span class="p">.</span><span class="nf">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
        <span class="n">blue</span> <span class="o">=</span> <span class="n">random</span><span class="p">.</span><span class="nf">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">instance</span> <span class="ow">in</span> <span class="n">label</span><span class="p">[</span><span class="sh">'</span><span class="s">Instances</span><span class="sh">'</span><span class="p">]:</span>

            <span class="n">annotation</span> <span class="o">=</span> <span class="n">instance</span><span class="p">[</span><span class="sh">'</span><span class="s">BoundingBox</span><span class="sh">'</span><span class="p">]</span>
            <span class="n">width</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="n">annotation</span><span class="p">[</span><span class="sh">'</span><span class="s">Width</span><span class="sh">'</span><span class="p">]</span> <span class="o">*</span> <span class="n">image</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">height</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="n">annotation</span><span class="p">[</span><span class="sh">'</span><span class="s">Height</span><span class="sh">'</span><span class="p">]</span> <span class="o">*</span> <span class="n">image</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">left</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="n">annotation</span><span class="p">[</span><span class="sh">'</span><span class="s">Left</span><span class="sh">'</span><span class="p">]</span> <span class="o">*</span> <span class="n">image</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">top</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="n">annotation</span><span class="p">[</span><span class="sh">'</span><span class="s">Top</span><span class="sh">'</span><span class="p">]</span> <span class="o">*</span> <span class="n">image</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

            <span class="c1"># Draw a rectangle on the image
</span>            <span class="n">cv2</span><span class="p">.</span><span class="nf">rectangle</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">top</span><span class="p">),</span> <span class="p">(</span><span class="n">left</span> <span class="o">+</span> <span class="n">width</span><span class="p">,</span> <span class="n">top</span> <span class="o">+</span> <span class="n">height</span><span class="p">),</span> <span class="p">(</span><span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
            <span class="n">x</span> <span class="o">=</span>  <span class="nf">int</span><span class="p">((</span><span class="n">left</span> <span class="o">+</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
            <span class="n">y</span> <span class="o">=</span>  <span class="nf">int</span><span class="p">((</span><span class="n">top</span> <span class="o">+</span> <span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>

            <span class="n">cv2</span><span class="p">.</span><span class="nf">putText</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">label</span><span class="p">[</span><span class="sh">'</span><span class="s">Name</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="nf">round</span><span class="p">(</span><span class="n">instance</span><span class="p">[</span><span class="sh">'</span><span class="s">Confidence</span><span class="sh">'</span><span class="p">])</span><span class="si">}</span><span class="s">%</span><span class="sh">"</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span> <span class="n">cv2</span><span class="p">.</span><span class="n">FONT_HERSHEY_SIMPLEX</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">red</span><span class="p">,</span><span class="n">green</span><span class="p">,</span><span class="n">blue</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>

<span class="n">cv2</span><span class="p">.</span><span class="nf">imwrite</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="s">augmented-</span><span class="si">{</span><span class="n">max_labels</span><span class="si">}</span><span class="s">_</span><span class="si">{</span><span class="n">min_confidence</span><span class="si">}</span><span class="s">.png</span><span class="sh">'</span><span class="p">,</span><span class="n">image</span><span class="p">)</span>
</pre></table></code></div></div><p>We are choosing random colors for each group category, adding rectange for each Bounding Box of this group and also add Text with group name:</p><h2 id="image-probability70-max_labels50"><span class="me-2">Image: probability=70%, max_labels=50</span><a href="#image-probability70-max_labels50" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href="https://raw.githubusercontent.com/tsypuk/samples/main/aws_hlml/rekognition/augmented-50_70.png" class="popup img-link shimmer"><img src="https://raw.githubusercontent.com/tsypuk/samples/main/aws_hlml/rekognition/augmented-50_70.png" alt="gf.jpeg" loading="lazy"></a></p><p>When invoking <code class="language-plaintext highlighter-rouge">rekognition</code> there are 2 params for tunning:</p><ul><li>max_labels to detect on image<li>min_confidence in %</ul><h2 id="image-probability90-max_labels50"><span class="me-2">Image: probability=90%, max_labels=50</span><a href="#image-probability90-max_labels50" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Previous augmented image had max_labels=50,min_confidence=70. Here is next augmented image with max_labels=50,min_confidence=90. And it changes a little <a href="https://raw.githubusercontent.com/tsypuk/samples/main/aws_hlml/rekognition/augmented-50_90.png" class="popup img-link shimmer"><img src="https://raw.githubusercontent.com/tsypuk/samples/main/aws_hlml/rekognition/augmented-50_90.png" alt="gf.jpeg" loading="lazy"></a></p><h2 id="image-probability95-max_labels200"><span class="me-2">Image: probability=95%, max_labels=200</span><a href="#image-probability95-max_labels200" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Same way we can add any additional info, here Iâ€™m showing the probability of each label:</p><p><a href="https://raw.githubusercontent.com/tsypuk/samples/main/aws_hlml/rekognition/augmented-200_95.png" class="popup img-link shimmer"><img src="https://raw.githubusercontent.com/tsypuk/samples/main/aws_hlml/rekognition/augmented-200_95.png" alt="gf.jpeg" loading="lazy"></a></p><h2 id="image-probability70-max_labels200"><span class="me-2">Image: probability=70%, max_labels=200</span><a href="#image-probability70-max_labels200" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Much more objects, and detection is still pretty accurate.</p><p><a href="https://raw.githubusercontent.com/tsypuk/samples/main/aws_hlml/rekognition/augmented-200_70.png" class="popup img-link shimmer"><img src="https://raw.githubusercontent.com/tsypuk/samples/main/aws_hlml/rekognition/augmented-200_70.png" alt="gf.jpeg" loading="lazy"></a></p><h2 id="conclusions"><span class="me-2">Conclusions</span><a href="#conclusions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Amazon Rekognition simplifies the integration of advanced image and video analysis capabilities into applications, empowering developers to build more intelligent and interactive solutions. Whether youâ€™re working on security systems, content moderation, or personalized user experiences, Rekognition provides a scalable and reliable set of tools for computer vision tasks. By understanding its features, use cases, and best practices, developers can harness the power of Rekognition to enhance the functionality and user experience of their applications.</p><h2 id="aws-rekognition-use-cases-scenarios"><span class="me-2">AWS Rekognition use cases, scenarios</span><a href="#aws-rekognition-use-cases-scenarios" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>security and surveillance<li>user authentication<li>media and entertainment<li>retail<li>healthcare</ul><h2 id="references-links"><span class="me-2">References (Links)</span><a href="#references-links" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><a href="https://aws.amazon.com/rekognition/">https://aws.amazon.com/rekognition/</a><li><a href="https://github.com/tsypuk/samples/tree/main/aws_hlml/rekognition">https://github.com/tsypuk/samples/tree/main/aws_hlml/rekognition</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/aws/">aws</a>, <a href="/categories/rekognition/">rekognition</a>, <a href="/categories/ml/">ml</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/aws/" class="post-tag no-text-decoration" >aws</a> <a href="/tags/rekognition/" class="post-tag no-text-decoration" >rekognition</a> <a href="/tags/ml/" class="post-tag no-text-decoration" >ml</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Detecting%20objects%20on%20image%20with%20AWS%20rekognition%20and%20labeling%20them%20with%20OpenCV%20-%20Engineer's%20Notes&url=https%3A%2F%2Ftsypuk.github.io%2Fposts%2F2023%2F11%2F15%2Frecognition.html" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Detecting%20objects%20on%20image%20with%20AWS%20rekognition%20and%20labeling%20them%20with%20OpenCV%20-%20Engineer's%20Notes&u=https%3A%2F%2Ftsypuk.github.io%2Fposts%2F2023%2F11%2F15%2Frecognition.html" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Ftsypuk.github.io%2Fposts%2F2023%2F11%2F15%2Frecognition.html&text=Detecting%20objects%20on%20image%20with%20AWS%20rekognition%20and%20labeling%20them%20with%20OpenCV%20-%20Engineer's%20Notes" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ftsypuk.github.io%2Fposts%2F2023%2F11%2F15%2Frecognition.html" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/2025/09/26/multiagnet-n8n-bedrock.html">Orchestrating AI multi-agent infrastructure with AWS Bedrock, OpenAI and n8n</a><li class="text-truncate lh-lg"> <a href="/posts/2025/07/20/elastic-cache-vector.html">Amazon ElastiCache Redis as a Vector Embeddings Storage for Semantic Search in AWS Community Blog posts</a><li class="text-truncate lh-lg"> <a href="/posts/2025/09/17/duckdb-s3.html">Running analytics queries from your machine with Zero-BigData stack needed on top of AWS S3(compressed JSON, Parquet, csv) or other DataSources</a><li class="text-truncate lh-lg"> <a href="/posts/2023/10/02/dynamo-design.html">DynamoDB Table Design Principles - NoSQL Modeling</a><li class="text-truncate lh-lg"> <a href="/posts/2023/10/04/dynamo-one-to-many.html">DynamoDB Table Design Principles - One-To-Many Relationships in NoSQL</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/aws/">aws</a> <a class="post-tag btn btn-outline-primary" href="/tags/dynamodb/">dynamodb</a> <a class="post-tag btn btn-outline-primary" href="/tags/git/">git</a> <a class="post-tag btn btn-outline-primary" href="/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/tags/s3/">s3</a> <a class="post-tag btn btn-outline-primary" href="/tags/ecs/">ecs</a> <a class="post-tag btn btn-outline-primary" href="/tags/network/">network</a> <a class="post-tag btn btn-outline-primary" href="/tags/cli/">cli</a> <a class="post-tag btn btn-outline-primary" href="/tags/fargate/">fargate</a> <a class="post-tag btn btn-outline-primary" href="/tags/firehose/">firehose</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/2023/11/12/comprehend.html" class="post-preview card h-100"><div class="card-body"> <time data-ts="1699797600" data-df="ll" > Nov 12, 2023 </time><h4 class="pt-0 my-2">Sentimental Analysis of popular movies using Managed AWS ML Comprehend service</h4><div class="text-muted"><p>Abstract In the ever-growing landscape of data, understanding and extracting valuable information from text data can be a daunting task. AWS Comprehend is a natural language processing (NLP) servi...</p></div></div></a></article><article class="col"> <a href="/posts/2023/01/29/aws-whisper.html" class="post-preview card h-100"><div class="card-body"> <time data-ts="1674986400" data-df="ll" > Jan 29, 2023 </time><h4 class="pt-0 my-2">Generation code with AWS CodeWhisperer</h4><div class="text-muted"><p>Abstract In recent years, multiple solutions have emerged on the market that aim to increase the productivity of engineers. These solutions provide features such as highlighting, autocompletion, a...</p></div></div></a></article><article class="col"> <a href="/posts/2023/03/21/xra-tracing-2.html" class="post-preview card h-100"><div class="card-body"> <time data-ts="1679407200" data-df="ll" > Mar 21, 2023 </time><h4 class="pt-0 my-2">AWS XRAY tracing. Part 2: Advanced. Querying & Grouping.</h4><div class="text-muted"><p>Abstract Welcome to the next part of our AWS X-Ray series. Weâ€™ll explore the flow of trace detection and how to specify different parameters like time ranges. Additionally, weâ€™ll take a deep dive i...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/2023/11/12/comprehend.html" class="btn btn-outline-primary" aria-label="Older" ><p>Sentimental Analysis of popular movies using Managed AWS ML Comprehend service</p></a> <a href="/posts/2024/01/27/arm-graviton.html" class="btn btn-outline-primary" aria-label="Newer" ><p>Migrating ECS Fargate Cluster from x86-64 to arm-64 AWS Graviton Architecture with Fallback Strategy</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>Â© <time>2025</time> <a href="https://www.linkedin.com/in/roman-tsypuk">Roman Tsypuk</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span> <span data-bs-toggle="tooltip" data-bs-placement="top" title="2025-09-26 20:11:52 +0300 &#013;be60bb44e6416aa69b8fd68791db025be40c523c">Build version: be60bb4</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/aws/">aws</a> <a class="post-tag btn btn-outline-primary" href="/tags/dynamodb/">dynamodb</a> <a class="post-tag btn btn-outline-primary" href="/tags/git/">git</a> <a class="post-tag btn btn-outline-primary" href="/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/tags/s3/">s3</a> <a class="post-tag btn btn-outline-primary" href="/tags/ecs/">ecs</a> <a class="post-tag btn btn-outline-primary" href="/tags/network/">network</a> <a class="post-tag btn btn-outline-primary" href="/tags/cli/">cli</a> <a class="post-tag btn btn-outline-primary" href="/tags/fargate/">fargate</a> <a class="post-tag btn btn-outline-primary" href="/tags/firehose/">firehose</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'tsypuk/tsypuk.github.io', 'data-repo-id': 'R_kgDOIxaFiw', 'data-category': 'General', 'data-category-id': 'DIC_kwDOIxaFi84CUSfn', 'data-mapping': 'og:title', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'top', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{content}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
