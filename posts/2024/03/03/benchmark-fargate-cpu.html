<!doctype html><html lang="en" ><head> <script async src="https://www.googletagmanager.com/gtag/js?id=G-LXECFRDHS1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-LXECFRDHS1'); </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="AWS Graviton ARM-64 vs Amazon X86-64 GRAND PRIX 2024. Round1: CPU Benchmark. | by Roman Tsypuk" /><meta name="author" content="Roman Tsypuk" /><meta property="og:locale" content="en" /><meta name="description" content="This is a first post in series of AWS Graviton ARM-64 vs Amazon X86-64 GRAND PRIX 2024 where we will check different performance factors of Graviton, compare to classic x86. I will use own benchmarking tool assembled as docker image that is bootstrapped to both arm and x86 instances. At last Round we will deep dive into its implementation." /><meta property="og:description" content="This is a first post in series of AWS Graviton ARM-64 vs Amazon X86-64 GRAND PRIX 2024 where we will check different performance factors of Graviton, compare to classic x86. I will use own benchmarking tool assembled as docker image that is bootstrapped to both arm and x86 instances. At last Round we will deep dive into its implementation." /><meta property="twitter:description" content="This is a first post in series of AWS Graviton ARM-64 vs Amazon X86-64 GRAND PRIX 2024 where we will check different performance factors of Graviton, compare to classic x86. I will use own benchmarking tool assembled as docker image that is bootstrapped to both arm and x86 instances. At last Round we will deep dive into its implementation." /><link rel="canonical" href="https://tsypuk.github.io/posts/2024/03/03/benchmark-fargate-cpu.html" /><meta property="og:url" content="https://tsypuk.github.io/posts/2024/03/03/benchmark-fargate-cpu.html" /><meta property="og:site_name" content="Engineerâ€™s Notes | Roman Tsypuk" /><meta property="og:image" content="https://tsypuk.github.io/images/banners/1200/pexels-alex-wolf-mx-14401662.jpeg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-03-03T16:00:00+02:00" /><meta name="publish_date" property="og:publish_date" content="2024-03-03T16:00:00+02:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://tsypuk.github.io/images/banners/1200/pexels-alex-wolf-mx-14401662.jpeg" /><meta property="twitter:title" content="AWS Graviton ARM-64 vs Amazon X86-64 GRAND PRIX 2024. Round1: CPU Benchmark. | by Roman Tsypuk" /><meta name="twitter:site" content="@roman_tsypuk" /><meta name="twitter:creator" content="@roman_tsypuk" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Roman Tsypuk"},"dateModified":"2024-09-02T12:42:36+03:00","datePublished":"2024-03-03T16:00:00+02:00","description":"This is a first post in series of AWS Graviton ARM-64 vs Amazon X86-64 GRAND PRIX 2024 where we will check different performance factors of Graviton, compare to classic x86. I will use own benchmarking tool assembled as docker image that is bootstrapped to both arm and x86 instances. At last Round we will deep dive into its implementation.","headline":"AWS Graviton ARM-64 vs Amazon X86-64 GRAND PRIX 2024. Round1: CPU Benchmark.","image":"https://tsypuk.github.io/images/banners/1200/pexels-alex-wolf-mx-14401662.jpeg","mainEntityOfPage":{"@type":"WebPage","@id":"https://tsypuk.github.io/posts/2024/03/03/benchmark-fargate-cpu.html"},"url":"https://tsypuk.github.io/posts/2024/03/03/benchmark-fargate-cpu.html"}</script><title>AWS Graviton ARM-64 vs Amazon X86-64 GRAND PRIX 2024. Round1: CPU Benchmark. | Engineer's Notes</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Engineer's Notes"><meta name="application-name" content="Engineer's Notes"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-LXECFRDHS1"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-LXECFRDHS1'); }); </script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/images/avatar/rtsypuk.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">Engineer's Notes</a><p class="site-subtitle fst-italic mb-0">Cloud, Infrastructure, Architecture, Networking</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories.html" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags.html" class="nav-link"> <i class="fa-fw fas fa-tag"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archived_posts.html" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/roman_tsypuk.html" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/tsypuk" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/roman_tsypuk" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/roman-tsypuk" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['tsypuk_conf','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>AWS Graviton ARM-64 vs Amazon X86-64 GRAND PRIX 2024. Round1: CPU Benchmark.</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link" aria-label="Search"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>AWS Graviton ARM-64 vs Amazon X86-64 GRAND PRIX 2024. Round1: CPU Benchmark.</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1709474400" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Mar 3, 2024 </time> </span> <span> Updated <time data-ts="1725270156" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Sep 2, 2024 </time> </span><div class="mt-3 mb-3"> <a href="/images/banners/1200/pexels-alex-wolf-mx-14401662.jpeg" class="popup img-link preview-img shimmer"><img src="/images/banners/1200/pexels-alex-wolf-mx-14401662.jpeg" alt="Preview Image" width="1200" height="630" loading="lazy"></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://www.linkedin.com/in/roman-tsypuk">Roman Tsypuk</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1076 words" > <em>5 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">AWS Graviton ARM-64 vs Amazon X86-64 GRAND PRIX 2024. Round1: CPU Benchmark.</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">AWS Graviton ARM-64 vs Amazon X86-64 GRAND PRIX 2024. Round1: CPU Benchmark.</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><h2 id="abstract"><span class="me-2">Abstract</span><a href="#abstract" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>This is a first post in series of <code class="language-plaintext highlighter-rouge">AWS Graviton ARM-64 vs Amazon X86-64 GRAND PRIX 2024</code> where we will check different performance factors of Graviton, compare to classic x86. I will use own benchmarking tool assembled as <code class="language-plaintext highlighter-rouge">docker image</code> that is bootstrapped to both <code class="language-plaintext highlighter-rouge">arm</code> and <code class="language-plaintext highlighter-rouge">x86</code> instances. At last <code class="language-plaintext highlighter-rouge">Round</code> we will deep dive into its implementation.</p><p>We will run standard <code class="language-plaintext highlighter-rouge">sysbench</code> test to stress different CPUs and check the scores for different scenarios.</p><h2 id="hypothesis-to-validate"><span class="me-2">Hypothesis to validate</span><a href="#hypothesis-to-validate" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>compare CPU-score utilization of x86 family<li>compare CPU-score utilization of arm family<li>compare CPU-score utilization between x86/arm<li>see what is underlying CPU and real COREs used on machine<li>check how single/multithreaded app consumes vCPUs</ul><h2 id="instances-configuration-used-for-testing"><span class="me-2">Instances Configuration used for testing</span><a href="#instances-configuration-used-for-testing" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Instances are prepared for each CPU architecture with the following configurations. Containers are bootstrapped from docker image that has all benchmark tools installed and is compatible to both x86/arm architectures.</p><p>No side-car processes or applications are running on the container. There is a small &lt;0.1% CPU overhead for established <code class="language-plaintext highlighter-rouge">SSH session</code> and <code class="language-plaintext highlighter-rouge">terminal</code> that controls operations.</p><p>Machines configuration is chosen with scaling factor <code class="language-plaintext highlighter-rouge">x2</code> to measure how actual operations scale compared to scaling of <code class="language-plaintext highlighter-rouge">vCPU</code>.</p><div class="table-wrapper"><table><thead><tr><th style="text-align: left">vCPU<th style="text-align: left">memory<th style="text-align: left">type<tbody><tr><td style="text-align: left">0.25<td style="text-align: left">0.5<td style="text-align: left">x86-64<tr><td style="text-align: left">0.5<td style="text-align: left">1<td style="text-align: left">x86-64<tr><td style="text-align: left">1<td style="text-align: left">2<td style="text-align: left">x86-64<tr><td style="text-align: left">2<td style="text-align: left">4<td style="text-align: left">x86-64<tr><td style="text-align: left">4<td style="text-align: left">8<td style="text-align: left">x86-64</table></div><div class="table-wrapper"><table><thead><tr><th style="text-align: left">vCPU<th style="text-align: left">memory<th style="text-align: left">type<tbody><tr><td style="text-align: left">0.25<td style="text-align: left">0.5<td style="text-align: left">ARM-64<tr><td style="text-align: left">0.5<td style="text-align: left">1<td style="text-align: left">ARM-64<tr><td style="text-align: left">1<td style="text-align: left">2<td style="text-align: left">ARM-64<tr><td style="text-align: left">2<td style="text-align: left">4<td style="text-align: left">ARM-64<tr><td style="text-align: left">4<td style="text-align: left">8<td style="text-align: left">ARM-64</table></div><h2 id="test-scenario"><span class="me-2">Test Scenario</span><a href="#test-scenario" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Same suit of performance tests is run on each instance. Suit is assembled as docker image and is available at <a href="https://hub.docker.com/repository/docker/rtsypuk/benchmark/general">benchmark image: docker hub</a></p><ul><li>sysbench_cpu_1.csv - single thread Random numbers generation for 10 sec to get CPU score<li>sysbench_cpu_2.csv - 2 threaded Random numbers generation for 10 sec to get CPU score<li>sysbench_cpu_4.csv - 4 threaded Random numbers generation for 10 sec to get CPU score<li>sysbench_cpu_8.csv - 8 threaded Random numbers generation for 10 sec to get CPU score</ul><p>1/2/4/8 threaded modes are selected to verify the utilization of Cores for machines with different physical CPU and Hypervisor vCPU configurations.</p><h2 id="benchmark-results-of-x86-64-instances"><span class="me-2">Benchmark results of x86-64 instances:</span><a href="#benchmark-results-of-x86-64-instances" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href="/images/posts/graviton/x86/025cpu05g.png" class="popup img-link shimmer"><img src="/images/posts/graviton/x86/025cpu05g.png" alt="025cpu05g.png" loading="lazy"></a> <em>x86: 0.25vcpu 0.5G memory</em></p><p><a href="/images/posts/graviton/x86/05cpu1g.png" class="popup img-link shimmer"><img src="/images/posts/graviton/x86/05cpu1g.png" alt="05cpu1g.png" loading="lazy"></a> <em>x86: 0.5vcpu 1G memory</em></p><p><a href="/images/posts/graviton/x86/1cpu2g.png" class="popup img-link shimmer"><img src="/images/posts/graviton/x86/1cpu2g.png" alt="1cpu2g.png" loading="lazy"></a> <em>x86: 1vcpu 2G memory</em></p><p>Till this point even we observe that 1-single-threaded application can utilize full capacity of all <code class="language-plaintext highlighter-rouge">vCPU</code>.</p><p>This line of experiments show that best performance is achieved by running single threaded workloads. If to scale to multithreaded mode we even observe the performance degradation.</p><p>Scale from 0.25 vCPU to 0.5vCPU went with 2x factor from 88.55 to 174.39 events/sec, but scale from 0.5vCPU to 1vCPU is not linear 174.39 to 424.38</p><blockquote class="prompt-danger"><p><strong>Spoiler:</strong> even that on this machine there are actually 2 CORE attached (see later), still Amazon hypervisor fully utilizes all vCPU credits even to 1 core 1 threaded application. Bigger scale is because of different physical CPU used for 1vCPU machines (see later)</p></blockquote><p><a href="/images/posts/graviton/x86/2cpu4g.png" class="popup img-link shimmer"><img src="/images/posts/graviton/x86/2cpu4g.png" alt="2cpu4g.png" loading="lazy"></a> <em>x86: 2vcpu 4G memory</em></p><p>This is strange! 2vCPU is not scaled linear, the shift is very small. But here we can observe, that full vCPUs are not utilized evenly between cores, there is a limit of vCPU that can be consumed by single core if we are using single threaded application, and there is a spike in performance when using 2 threaded application.</p><p><a href="/images/posts/graviton/x86/4cpu8g.png" class="popup img-link shimmer"><img src="/images/posts/graviton/x86/4cpu8g.png" alt="4cpu8g.png" loading="lazy"></a> <em>x86: 4vcpu 8G memory</em></p><p>Here we see that 4 threaded application has more event/sec and scaling is fair enough <code class="language-plaintext highlighter-rouge">2x</code> both with vCPU and events/sec. 4vCPU has double increase in events/sec compared to 2vCPU.</p><h2 id="benchmark-results-of-arm-64-instances"><span class="me-2">Benchmark results of arm-64 instances:</span><a href="#benchmark-results-of-arm-64-instances" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href="/images/posts/graviton/arm/025cpu05g.png" class="popup img-link shimmer"><img src="/images/posts/graviton/arm/025cpu05g.png" alt="025cpu05g.png" loading="lazy"></a> <em>arm-64: 0.25vcpu 0.5G memory</em></p><p><a href="/images/posts/graviton/arm/05cpu1g.png" class="popup img-link shimmer"><img src="/images/posts/graviton/arm/05cpu1g.png" alt="05cpu1g.png" loading="lazy"></a> <em>arm-64: 0.5vcpu 1G memory</em></p><p><a href="/images/posts/graviton/arm/1cpu2g.png" class="popup img-link shimmer"><img src="/images/posts/graviton/arm/1cpu2g.png" alt="1cpu2g.png" loading="lazy"></a> <em>arm-64: 1vcpu 2G memory</em></p><p><a href="/images/posts/graviton/arm/2cpu4g.png" class="popup img-link shimmer"><img src="/images/posts/graviton/arm/2cpu4g.png" alt="2cpu4g.png" loading="lazy"></a> <em>arm-64: 2vcpu 4G memory</em></p><p><a href="/images/posts/graviton/arm/4cpu8g.png" class="popup img-link shimmer"><img src="/images/posts/graviton/arm/4cpu8g.png" alt="4cpu8g.png" loading="lazy"></a> <em>arm-64: 4vcpu 8G memory</em></p><p>Results are more linear predictable and numbers are self explaining:</p><ul><li>all instances till 1vCPU can fully utilize 1 CORE with highest event/sec.<li>scaling factor is as expected compared to vCPUs<li>2vCPU is 2x boost with 2 threaded app<li>4vCPU is 4x boost with 4 threaded app</ul><p>And the biggest finding is that <code class="language-plaintext highlighter-rouge">events/sec</code> are much higher compared to same experiments on x86-64.</p><h2 id="physical-cores-on-the-machine"><span class="me-2">Physical COREs on the machine</span><a href="#physical-cores-on-the-machine" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Letâ€™s explore the real COREs attached to Task and container to understand the parallelism possibilities and features of Amazon hyperscaler.</p><h3 id="aws-x86-architecture"><span class="me-2">AWS x86 architecture</span><a href="#aws-x86-architecture" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="table-wrapper"><table><thead><tr><th style="text-align: left">vCPU<th style="text-align: left">memory<th style="text-align: left">type<th style="text-align: left">COREs<tbody><tr><td style="text-align: left">0.25<td style="text-align: left">0.5<td style="text-align: left">x86-64<td style="text-align: left">2x Intel(R) Xeon(R) Platinum 8259CL CPU @ 2.50GHz<tr><td style="text-align: left">0.5<td style="text-align: left">1<td style="text-align: left">x86-64<td style="text-align: left">2x Intel(R) Xeon(R) Platinum 8259CL CPU @ 2.50GHz<tr><td style="text-align: left">1<td style="text-align: left">2<td style="text-align: left">x86-64<td style="text-align: left">2x Intel(R) Xeon(R) Platinum 8275CL CPU @ 3.00GHz<tr><td style="text-align: left">2<td style="text-align: left">4<td style="text-align: left">x86-64<td style="text-align: left">2x Intel(R) Xeon(R) Platinum 8175M CPU @ 2.50GHz<tr><td style="text-align: left">4<td style="text-align: left">8<td style="text-align: left">x86-64<td style="text-align: left">4x Intel(R) Xeon(R) Platinum 8259CL CPU @ 2.50GHz</table></div><p>We can observe that different CPUs are used in different configurations.</p><p>0.25, 0.5, 2 vCPU all are using 2 CORES of same processor family <code class="language-plaintext highlighter-rouge">Intel(R) Xeon(R) Platinum 8259CL CPU @ 2.50GHz</code>. 1vCPU instances are using are using more powerful 2 cores <code class="language-plaintext highlighter-rouge">2x Intel(R) Xeon(R) Platinum 8275CL CPU @ 3.00GHz</code>. And what is strange that 4vCPU instance again using less productive <code class="language-plaintext highlighter-rouge">Platinum 8259CL CPU @ 2.50GHz</code> but with 4 COREs.</p><h3 id="aws-graviton"><span class="me-2">AWS Graviton</span><a href="#aws-graviton" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><blockquote class="prompt-tip"><p>The Graviton2 CPU has 64 Neoverse N1 cores, with ARMv8.2-A ISA including 2Ã—128 bit Neon, LSE, fp16, rcpc, dotprod, crypto. The vCPUs are physical cores in a single NUMA domain, running at 2.5 GHz</p></blockquote><div class="table-wrapper"><table><thead><tr><th style="text-align: left">vCPU<th style="text-align: left">memory<th style="text-align: left">type<th style="text-align: left">COREs<tbody><tr><td style="text-align: left">0.25<td style="text-align: left">0.5<td style="text-align: left">ARM-64<td style="text-align: left">2x BogoMIPS : 243.75<tr><td style="text-align: left">0.5<td style="text-align: left">1<td style="text-align: left">ARM-64<td style="text-align: left">2x BogoMIPS : 243.75<tr><td style="text-align: left">1<td style="text-align: left">2<td style="text-align: left">ARM-64<td style="text-align: left">2x BogoMIPS : 243.75<tr><td style="text-align: left">2<td style="text-align: left">4<td style="text-align: left">ARM-64<td style="text-align: left">2x BogoMIPS : 243.75<tr><td style="text-align: left">4<td style="text-align: left">8<td style="text-align: left">ARM-64<td style="text-align: left">4x BogoMIPS : 243.75</table></div><p>Graviton cores assignment follows the same pattern, with difference that there is no change of CPU family. So scaling should be more smoozer and predictive.</p><h2 id="scaling-factors-comparison"><span class="me-2">Scaling Factors Comparison</span><a href="#scaling-factors-comparison" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Performance scaling is much better for <code class="language-plaintext highlighter-rouge">arm</code> instances - we can observe perfect line with same angel. But for <code class="language-plaintext highlighter-rouge">x86</code> instances there are some anomalies with bigger/smaller angel. Also <code class="language-plaintext highlighter-rouge">arm</code> performance with same <code class="language-plaintext highlighter-rouge">vCPU</code> is much higher compare to <code class="language-plaintext highlighter-rouge">x86</code>.</p><p><a href="/images/posts/graviton/scaling_cpu.png" class="popup img-link shimmer"><img src="/images/posts/graviton/scaling_cpu.png" alt="img.png" loading="lazy"></a> <em>events/sec per vCPU for x86-64/arm-64</em></p><p>At the same time pricing scales linear compared to amount of vCPUs attached. ARM scaling is less expensive.</p><p><a href="/images/posts/graviton/price_cpu.png" class="popup img-link shimmer"><img src="/images/posts/graviton/price_cpu.png" alt="price_cpu.png" loading="lazy"></a> <em>Price per day per vCPU for x86-64/arm-64</em></p><p>Scaling of <code class="language-plaintext highlighter-rouge">vCPU</code> for <code class="language-plaintext highlighter-rouge">arm-64</code> <code class="language-plaintext highlighter-rouge">graviton</code> follows the same trend both from <code class="language-plaintext highlighter-rouge">events/sec</code> and <code class="language-plaintext highlighter-rouge">pricing</code>, but for <code class="language-plaintext highlighter-rouge">x86-64</code> price scales faster compared to performance, much faster ðŸ˜Š.</p><h2 id="key-takeaways"><span class="me-2">Key TakeAways:</span><a href="#key-takeaways" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>know you application details for best tune CPU and instance family selection<li>vertical scaling of vCPU in case you have big CPU utilization will not help if you are using <code class="language-plaintext highlighter-rouge">nodejs</code> or single threaded app<li>perform real benchmarks on you hardware and compare the results<li>there is different amount of Cores, CPU families attached to different vCPU families so scaling is not as expected</ul><h2 id="references-links"><span class="me-2">References (Links)</span><a href="#references-links" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><a href="https://hub.docker.com/repository/docker/rtsypuk/benchmark/general">https://hub.docker.com/repository/docker/rtsypuk/benchmark/general</a><li><a href="https://aws.amazon.com/fargate/pricing/">https://aws.amazon.com/fargate/pricing/</a><li><a href="https://github.com/tsypuk/samples/commit/db3dac9114cb82faaf8c82f6769da75c3b2620d4">full benchmark results</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/aws/">aws</a>, <a href="/categories/benchmark/">benchmark</a>, <a href="/categories/arm-64/">arm-64</a>, <a href="/categories/x86-64/">x86-64</a>, <a href="/categories/performance/">performance</a>, <a href="/categories/graviton/">graviton</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/aws/" class="post-tag no-text-decoration" >aws</a> <a href="/tags/benchmark/" class="post-tag no-text-decoration" >benchmark</a> <a href="/tags/arm-64/" class="post-tag no-text-decoration" >arm-64</a> <a href="/tags/x86-64/" class="post-tag no-text-decoration" >x86-64</a> <a href="/tags/performance/" class="post-tag no-text-decoration" >performance</a> <a href="/tags/graviton/" class="post-tag no-text-decoration" >graviton</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=AWS%20Graviton%20ARM-64%20vs%20Amazon%20X86-64%20GRAND%20PRIX%202024.%20Round1:%20CPU%20Benchmark.%20-%20Engineer's%20Notes&url=https%3A%2F%2Ftsypuk.github.io%2Fposts%2F2024%2F03%2F03%2Fbenchmark-fargate-cpu.html" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=AWS%20Graviton%20ARM-64%20vs%20Amazon%20X86-64%20GRAND%20PRIX%202024.%20Round1:%20CPU%20Benchmark.%20-%20Engineer's%20Notes&u=https%3A%2F%2Ftsypuk.github.io%2Fposts%2F2024%2F03%2F03%2Fbenchmark-fargate-cpu.html" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Ftsypuk.github.io%2Fposts%2F2024%2F03%2F03%2Fbenchmark-fargate-cpu.html&text=AWS%20Graviton%20ARM-64%20vs%20Amazon%20X86-64%20GRAND%20PRIX%202024.%20Round1:%20CPU%20Benchmark.%20-%20Engineer's%20Notes" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ftsypuk.github.io%2Fposts%2F2024%2F03%2F03%2Fbenchmark-fargate-cpu.html" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/2025/09/26/multiagnet-n8n-bedrock.html">Orchestrating AI multi-agent infrastructure with AWS Bedrock, OpenAI and n8n</a><li class="text-truncate lh-lg"> <a href="/posts/2025/07/20/elastic-cache-vector.html">Amazon ElastiCache Redis as a Vector Embeddings Storage for Semantic Search in AWS Community Blog posts</a><li class="text-truncate lh-lg"> <a href="/posts/2025/09/17/duckdb-s3.html">Running analytics queries from your machine with Zero-BigData stack needed on top of AWS S3(compressed JSON, Parquet, csv) or other DataSources</a><li class="text-truncate lh-lg"> <a href="/posts/2023/10/02/dynamo-design.html">DynamoDB Table Design Principles - NoSQL Modeling</a><li class="text-truncate lh-lg"> <a href="/posts/2023/10/04/dynamo-one-to-many.html">DynamoDB Table Design Principles - One-To-Many Relationships in NoSQL</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/aws/">aws</a> <a class="post-tag btn btn-outline-primary" href="/tags/dynamodb/">dynamodb</a> <a class="post-tag btn btn-outline-primary" href="/tags/git/">git</a> <a class="post-tag btn btn-outline-primary" href="/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/tags/s3/">s3</a> <a class="post-tag btn btn-outline-primary" href="/tags/ecs/">ecs</a> <a class="post-tag btn btn-outline-primary" href="/tags/network/">network</a> <a class="post-tag btn btn-outline-primary" href="/tags/cli/">cli</a> <a class="post-tag btn btn-outline-primary" href="/tags/fargate/">fargate</a> <a class="post-tag btn btn-outline-primary" href="/tags/firehose/">firehose</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/2024/01/27/arm-graviton.html" class="post-preview card h-100"><div class="card-body"> <time data-ts="1706364000" data-df="ll" > Jan 27, 2024 </time><h4 class="pt-0 my-2">Migrating ECS Fargate Cluster from x86-64 to arm-64 AWS Graviton Architecture with Fallback Strategy</h4><div class="text-muted"><p>Abstract In recent years, the technology landscape has seen a significant shift towards sustainable and energy-efficient practices. This paradigm is not just limited to data centers, user interfac...</p></div></div></a></article><article class="col"> <a href="/posts/2023/03/21/xra-tracing-2.html" class="post-preview card h-100"><div class="card-body"> <time data-ts="1679407200" data-df="ll" > Mar 21, 2023 </time><h4 class="pt-0 my-2">AWS XRAY tracing. Part 2: Advanced. Querying & Grouping.</h4><div class="text-muted"><p>Abstract Welcome to the next part of our AWS X-Ray series. Weâ€™ll explore the flow of trace detection and how to specify different parameters like time ranges. Additionally, weâ€™ll take a deep dive i...</p></div></div></a></article><article class="col"> <a href="/posts/2023/03/07/mingrammer.html" class="post-preview card h-100"><div class="card-body"> <time data-ts="1678165200" data-df="ll" > Mar 7, 2023 </time><h4 class="pt-0 my-2">Diagrams-as-a-Code DaC with Mingrammer for Public Cloud Providers and Agnostic Stacks.</h4><div class="text-muted"><p>Abstract During my analysis of open-source libraries that are suitable for rendering AWS components, in order to simplify the understanding and documenting of application architecture I discovered ...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/2024/02/24/aws-chime.html" class="btn btn-outline-primary" aria-label="Older" ><p>AWS Chime SIP Trunking Integration with VoIP Asterisk</p></a> <a href="/posts/2024/05/31/git-multiple-ssh-keys.html" class="btn btn-outline-primary" aria-label="Newer" ><p>Using multiple ssh keys in different git projects and accounts</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>Â© <time>2025</time> <a href="https://www.linkedin.com/in/roman-tsypuk">Roman Tsypuk</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span> <span data-bs-toggle="tooltip" data-bs-placement="top" title="2025-09-26 20:11:52 +0300 &#013;be60bb44e6416aa69b8fd68791db025be40c523c">Build version: be60bb4</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/aws/">aws</a> <a class="post-tag btn btn-outline-primary" href="/tags/dynamodb/">dynamodb</a> <a class="post-tag btn btn-outline-primary" href="/tags/git/">git</a> <a class="post-tag btn btn-outline-primary" href="/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/tags/s3/">s3</a> <a class="post-tag btn btn-outline-primary" href="/tags/ecs/">ecs</a> <a class="post-tag btn btn-outline-primary" href="/tags/network/">network</a> <a class="post-tag btn btn-outline-primary" href="/tags/cli/">cli</a> <a class="post-tag btn btn-outline-primary" href="/tags/fargate/">fargate</a> <a class="post-tag btn btn-outline-primary" href="/tags/firehose/">firehose</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'tsypuk/tsypuk.github.io', 'data-repo-id': 'R_kgDOIxaFiw', 'data-category': 'General', 'data-category-id': 'DIC_kwDOIxaFi84CUSfn', 'data-mapping': 'og:title', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'top', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{content}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
