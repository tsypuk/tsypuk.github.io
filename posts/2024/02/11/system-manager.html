<!doctype html><html lang="en" ><head> <script async src="https://www.googletagmanager.com/gtag/js?id=G-LXECFRDHS1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-LXECFRDHS1'); </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="AWS SSM Session Manager as secure Hub to establish multiple Connections to instances and Port Forwarding | by Roman Tsypuk" /><meta name="author" content="Roman Tsypuk" /><meta property="og:locale" content="en" /><meta name="description" content="Port forwarding or SSH tunnelling is technic widely used to map remote ports to a client machine with possibility of remapping. The data traffic is encrypted and transferred within SSH tunnel. Such setups are usually used to establish connections to development environment or for fast troubleshooting." /><meta property="og:description" content="Port forwarding or SSH tunnelling is technic widely used to map remote ports to a client machine with possibility of remapping. The data traffic is encrypted and transferred within SSH tunnel. Such setups are usually used to establish connections to development environment or for fast troubleshooting." /><meta property="twitter:description" content="Port forwarding or SSH tunnelling is technic widely used to map remote ports to a client machine with possibility of remapping. The data traffic is encrypted and transferred within SSH tunnel. Such setups are usually used to establish connections to development environment or for fast troubleshooting." /><link rel="canonical" href="https://tsypuk.github.io/posts/2024/02/11/system-manager.html" /><meta property="og:url" content="https://tsypuk.github.io/posts/2024/02/11/system-manager.html" /><meta property="og:site_name" content="Engineer’s Notes | Roman Tsypuk" /><meta property="og:image" content="https://tsypuk.github.io/images/banners/1200/pexels-johnnn-zhang-3811676.jpeg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-02-11T16:00:00+02:00" /><meta name="publish_date" property="og:publish_date" content="2024-02-11T16:00:00+02:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://tsypuk.github.io/images/banners/1200/pexels-johnnn-zhang-3811676.jpeg" /><meta property="twitter:title" content="AWS SSM Session Manager as secure Hub to establish multiple Connections to instances and Port Forwarding | by Roman Tsypuk" /><meta name="twitter:site" content="@roman_tsypuk" /><meta name="twitter:creator" content="@roman_tsypuk" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Roman Tsypuk"},"dateModified":"2024-02-26T19:52:26+02:00","datePublished":"2024-02-11T16:00:00+02:00","description":"Port forwarding or SSH tunnelling is technic widely used to map remote ports to a client machine with possibility of remapping. The data traffic is encrypted and transferred within SSH tunnel. Such setups are usually used to establish connections to development environment or for fast troubleshooting.","headline":"AWS SSM Session Manager as secure Hub to establish multiple Connections to instances and Port Forwarding","image":"https://tsypuk.github.io/images/banners/1200/pexels-johnnn-zhang-3811676.jpeg","mainEntityOfPage":{"@type":"WebPage","@id":"https://tsypuk.github.io/posts/2024/02/11/system-manager.html"},"url":"https://tsypuk.github.io/posts/2024/02/11/system-manager.html"}</script><title>AWS SSM Session Manager as secure Hub to establish multiple Connections to instances and Port Forwarding | Engineer's Notes</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Engineer's Notes"><meta name="application-name" content="Engineer's Notes"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-LXECFRDHS1"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-LXECFRDHS1'); }); </script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/images/avatar/rtsypuk.jpg" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">Engineer's Notes</a><p class="site-subtitle fst-italic mb-0">Cloud, Infrastructure, Architecture, Networking</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories.html" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags.html" class="nav-link"> <i class="fa-fw fas fa-tag"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archived_posts.html" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/roman_tsypuk.html" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/tsypuk" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/roman_tsypuk" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/roman-tsypuk" aria-label="linkedin" target="_blank" rel="noopener noreferrer" > <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['tsypuk_conf','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>AWS SSM Session Manager as secure Hub to establish multiple Connections to instances and Port Forwarding</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link" aria-label="Search"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>AWS SSM Session Manager as secure Hub to establish multiple Connections to instances and Port Forwarding</h1><div class="post-meta text-muted"> <span> Posted <time data-ts="1707660000" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Feb 11, 2024 </time> </span> <span> Updated <time data-ts="1708969946" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Feb 26, 2024 </time> </span><div class="mt-3 mb-3"> <a href="/images/banners/1200/pexels-johnnn-zhang-3811676.jpeg" class="popup img-link preview-img shimmer"><img src="/images/banners/1200/pexels-johnnn-zhang-3811676.jpeg" alt="Preview Image" width="1200" height="630" loading="lazy"></a></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://www.linkedin.com/in/roman-tsypuk">Roman Tsypuk</a> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="1224 words" > <em>6 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">AWS SSM Session Manager as secure Hub to establish multiple Connections to instances and Port Forwarding</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">AWS SSM Session Manager as secure Hub to establish multiple Connections to instances and Port Forwarding</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><h2 id="abstract"><span class="me-2">Abstract</span><a href="#abstract" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Port forwarding or SSH tunnelling is technic widely used to map remote ports to a client machine with possibility of remapping. The data traffic is encrypted and transferred within SSH tunnel. Such setups are usually used to establish connections to development environment or for fast troubleshooting.</p><h2 id="existing-implementations"><span class="me-2">Existing Implementations</span><a href="#existing-implementations" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Very often customers setup and configure ssh servers, maintain keys with the risk of leak and exposure, rotation, etc. Also in many AWS learning materials and certifications there is a technic called the Jump Box or a Bastion Host - the machine that is publicly available for incoming connection that is the entry point for admin.</p><p>For ECS containers, some sysops are even prebuild image with ssh server installed with keys.</p><p>But all this technics besides human factor risks, are exposing opened SSH port, making the machines first of all discoverable and potentially vulnerable for the attacks.</p><p>In this post we will explore a more secure and reliable approach that AWS Systems Manager provides - the Session Manager feature. It allows to establish secure connection to running instances without exposed ports or installing ssh servers. AWS Systems Manager once configuration is applied mounts external ephemeral storage that has preinstalled agent, keys and configuration. Also on top this setup is fully controlled by AWS IAM.</p><h2 id="network-configuration"><span class="me-2">Network configuration</span><a href="#network-configuration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Using System Manager Session Manager with Port Forwarding mode does not require you to apply any updates in Security Groups, Network Access Control Lists, VPC routing, etc. The Session established from you local client till remote server agent is encrypted and traffic or port forwarding runs inside the tunnel. This is excellent tool for urgent troubleshooting remote instances that are not exposed and stay in private network (no need to break network setup).</p><blockquote class="prompt-tip"><p>A session is a connection made to a managed node using Session Manager. Sessions are based on a secure bi-directional communication channel between the client (you) and the remote managed node that streams inputs and outputs for commands. Traffic between a client and a managed node is encrypted using TLS 1.2, and requests to create the connection are signed using Sigv4. This two-way communication allows interactive bash and PowerShell access to managed nodes. You can also use an AWS Key Management Service (AWS KMS) key to further encrypt data beyond the default TLS encryption.</p></blockquote><h2 id="client-side-configuration"><span class="me-2">Client-side configuration</span><a href="#client-side-configuration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>There are prerequisites that require both client and remote side configurations to start using SSM. Full configuration with troubleshooting steps is described in previous post: <a href="/posts/2024/02/04/ecs-exec.html">Securely accessing ECS Fargate containers shell, without SSH or exposed ports</a>.</p><p>In this post we will concentrate on real practical use cases.</p><h2 id="connecting-to-remote-ecs-container"><span class="me-2">Connecting to remote ECS container</span><a href="#connecting-to-remote-ecs-container" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>To connect shell of running ECS task - we need to specify following params:</p><div class="table-wrapper"><table><thead><tr><th style="text-align: left">Param<th style="text-align: left">Value<tbody><tr><td style="text-align: left">cluster<td style="text-align: left">fargate-cluster<tr><td style="text-align: left">taskId<td style="text-align: left">9cdef64a51841c93c26d5<tr><td style="text-align: left">containerId<td style="text-align: left">9cdef64a51841c93c26d40abd5-5245480</table></div><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>aws ssm start-session <span class="se">\</span>
<span class="nt">--target</span> ecs:fargate-cluster_9cdef64a51841c93c26d5_9cdef64a51841c93c26d40abd5-5245480 <span class="se">\</span>

The Session Manager plugin was installed successfully. Use the AWS CLI to start a session.
Starting session with SessionId:
bash-5.0#
</pre></table></code></div></div><h2 id="connection-to-remote-ec2-instance"><span class="me-2">Connection to remote EC2 instance</span><a href="#connection-to-remote-ec2-instance" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Connection to EC2 instance can be done either through <code class="language-plaintext highlighter-rouge">aws cloud console</code> or running <code class="language-plaintext highlighter-rouge">locally</code>:</p><div class="table-wrapper"><table><thead><tr><th style="text-align: left">Param<th style="text-align: left">Value<tbody><tr><td style="text-align: left">target<td style="text-align: left">EC2 instance ID</table></div><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>aws ssm start-session <span class="nt">--region</span> eu-west-1 <span class="se">\</span>
<span class="nt">--target</span> instanceId
</pre></table></code></div></div><h2 id="ssm-param-document-name"><span class="me-2">SSM PARAM: document-name</span><a href="#ssm-param-document-name" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>If we check the documentation there is additional parameter called <code class="language-plaintext highlighter-rouge">document-name</code> that allows to specify <code class="language-plaintext highlighter-rouge">aws ssm</code> what additional actions should connection perform. One of the most common used is port forwarding from remote to local machine. Let’s explore in details.</p><h2 id="port-forwarding-of-ecs-container"><span class="me-2">Port-forwarding of ECS container</span><a href="#port-forwarding-of-ecs-container" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Connect <code class="language-plaintext highlighter-rouge">1880</code> remote ECS container port to <code class="language-plaintext highlighter-rouge">1880</code> local machine port.</p><div class="table-wrapper"><table><thead><tr><th style="text-align: left">Param<th style="text-align: left">Value<tbody><tr><td style="text-align: left">cluster<td style="text-align: left">fargate-cluster<tr><td style="text-align: left">taskId<td style="text-align: left">9cdef64a51841c93c26d5<tr><td style="text-align: left">containerId<td style="text-align: left">9cdef64a51841c93c26d40abd5-5245480</table></div><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>aws ssm start-session <span class="se">\</span>
<span class="nt">--target</span> ecs:fargate-cluster_9cdef64a51841c93c26d5_9cdef64a51841c93c26d40abd5-5245480 <span class="se">\</span>
<span class="nt">--document-name</span> AWS-StartPortForwardingSession <span class="se">\</span>
<span class="nt">--parameters</span> <span class="s1">'{"portNumber":["1880"], "localPortNumber":["1880"]}'</span>

Starting session with SessionId: xxxx
Port 1880 opened <span class="k">for </span>sessionId xxx
Waiting <span class="k">for </span>connections...

Connection accepted <span class="k">for </span>session <span class="o">[</span>xxx]
</pre></table></code></div></div><p>Running this command on your local machine:</p><ul><li>a secure tunnel direct connection is established till 9cdef64a51841c93c26d40abd5 container<li>client machine 1880 port is mapped to 1880 port of remote container port through secure tunnel</ul><p>In this example we are connecting to remote NodeRed application that is by default running on 1880 port, but without opening the port.</p><h2 id="port-forwarding-of-ec2"><span class="me-2">Port-forwarding of EC2</span><a href="#port-forwarding-of-ec2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Connect <code class="language-plaintext highlighter-rouge">80</code> remote EC2 instance port to <code class="language-plaintext highlighter-rouge">8080</code> local machine port.</p><div class="table-wrapper"><table><thead><tr><th style="text-align: left">Param<th style="text-align: left">Value<tbody><tr><td style="text-align: left">target<td style="text-align: left">EC2 instance ID</table></div><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>aws ssm start-session <span class="se">\</span>
<span class="nt">--target</span> EC2-instance-ID <span class="se">\</span>
<span class="nt">--document-name</span> AWS-StartPortForwardingSession <span class="se">\</span>
<span class="nt">--parameters</span> <span class="s1">'{"portNumber":["80"], "localPortNumber":["8080"]}'</span>
</pre></table></code></div></div><h2 id="aws-startportforwardingsessiontoremotehost"><span class="me-2">AWS-StartPortForwardingSessionToRemoteHost</span><a href="#aws-startportforwardingsessiontoremotehost" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>And even more :). With <code class="language-plaintext highlighter-rouge">AWS-StartPortForwardingSessionToRemoteHost</code> we can connect to JumpBox instance and run further <code class="language-plaintext highlighter-rouge">2nd hop</code> <code class="language-plaintext highlighter-rouge">port forwarding</code> to RDS instance: Connecting to RDS through EC2 JumpBox of the same subnet:</p><div class="table-wrapper"><table><thead><tr><th style="text-align: left">Param<th style="text-align: left">Value<tbody><tr><td style="text-align: left">target<td style="text-align: left">EC2 instance ID<tr><td style="text-align: left">host<td style="text-align: left">RDS<tr><td style="text-align: left">portNumber<td style="text-align: left">RDS port<tr><td style="text-align: left">localPortNumber<td style="text-align: left">local machine 2nd hop port</table></div><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>aws ssm start-session <span class="nt">--region</span> eu-west-1 <span class="se">\</span>
<span class="nt">--target</span> &lt;your jump host instance <span class="nb">id</span><span class="o">&gt;</span> <span class="se">\</span>
<span class="nt">--document-name</span> AWS-StartPortForwardingSessionToRemoteHost <span class="se">\</span>
<span class="nt">--parameters</span> <span class="nv">host</span><span class="o">=</span><span class="s2">"&lt;rds endpoint&gt;"</span>,portNumber<span class="o">=</span><span class="s2">"3306"</span>,localPortNumber<span class="o">=</span><span class="s2">"3306"</span>

<span class="o">&gt;</span> mysql <span class="nt">--host</span><span class="o">=</span>127.0.0.1
</pre></table></code></div></div><h2 id="required-iam-role-permission"><span class="me-2">Required IAM Role Permission</span><a href="#required-iam-role-permission" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>To allow SSM interact with a service - following <code class="language-plaintext highlighter-rouge">Permissions</code> must be added to existing <code class="language-plaintext highlighter-rouge">IAM Role</code> of <code class="language-plaintext highlighter-rouge">ECS service</code>:</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"Version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-10-17"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"Statement"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"Effect"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Allow"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Action"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"ssmmessages:CreateControlChannel"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ssmmessages:CreateDataChannel"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ssmmessages:OpenControlChannel"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ssmmessages:OpenDataChannel"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"Resource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><h2 id="ecs-task-enableexecutecommand-updates"><span class="me-2">ECS Task enableExecuteCommand updates</span><a href="#ecs-task-enableexecutecommand-updates" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>In <code class="language-plaintext highlighter-rouge">Task Definition</code> <code class="language-plaintext highlighter-rouge">"enableExecuteCommand": true,</code> should be enabled. If we are planning to update existing <code class="language-plaintext highlighter-rouge">Task</code> following command can be executed (it will require redeployment of new service version):</p><div class="table-wrapper"><table><thead><tr><th style="text-align: left">Param<th style="text-align: left">Value<tbody><tr><td style="text-align: left">cluster<td style="text-align: left">fargate-cluster<tr><td style="text-align: left">service<td style="text-align: left">service name</table></div><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>aws ecs update-service <span class="nt">--cluster</span> dev-fargate-cluster <span class="se">\</span>
    <span class="nt">--enable-execute-command</span> <span class="nt">--service</span> xxxxxx-fg-svc <span class="se">\</span>
    <span class="nt">--force-new-deployment</span>
</pre></table></code></div></div><h2 id="ecs-task-check-applied-updates"><span class="me-2">ECS Task check applied updates</span><a href="#ecs-task-check-applied-updates" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="table-wrapper"><table><thead><tr><th style="text-align: left">Param<th style="text-align: left">Value<tbody><tr><td style="text-align: left">cluster<td style="text-align: left">fargate-cluster<tr><td style="text-align: left">tasks<td style="text-align: left">task ARN</table></div><div class="language-shell highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>aws ecs describe-tasks <span class="nt">--cluster</span> fargate-cluster <span class="nt">--tasks</span> arn:aws:ecs:eu-west-1:123456789012:task/fargate-cluster/xxxxxx
</pre></table></code></div></div><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"tasks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"attachments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b5018ca9-b683-4f9c-xxxxxx-xxxxxx"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ElasticNetworkInterface"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ATTACHED"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"details"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subnetId"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subnet-xxxxxx"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"networkInterfaceId"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eni-xxxxxx"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"macAddress"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0a:b8:xx:xx:0c:df"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"privateDnsName"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ip-10-xx-2-xx.eu-west-1.compute.internal"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"privateIPv4Address"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.xx.2.xx"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ecs.cpu-architecture"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"x86_64"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"availabilityZone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eu-west-1b"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"clusterArn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:aws:ecs:eu-west-1:123456789012:cluster/fargate-cluster"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"connectivity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CONNECTED"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"connectivityAt"</span><span class="p">:</span><span class="w"> </span><span class="mf">1708944472.521</span><span class="p">,</span><span class="w">
      </span><span class="nl">"containers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"containerArn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:aws:ecs:eu-west-1:123456789012:container/fargate-cluster/xxxxxx/xxxxxx"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"taskArn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:aws:ecs:eu-west-1:123456789012:task/fargate-cluster/xxxxxx"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxxxxx"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789012.dkr.ecr.eu-west-1.amazonaws.com/xxxxxx/xxxxxx:xxxxxx"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"imageDigest"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sha256:xxxxxx"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"runtimeId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxxxxx-xxxxxx"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"lastStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RUNNING"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"networkBindings"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
          </span><span class="nl">"networkInterfaces"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"attachmentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxxxxx-b683-4f9c-b521-xxxxxx"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"privateIpv4Address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.0.xxxxxx.xxxxxx"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">],</span><span class="w">
          </span><span class="nl">"healthStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HEALTHY"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"managedAgents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"lastStartedAt"</span><span class="p">:</span><span class="w"> </span><span class="mf">1708944503.722</span><span class="p">,</span><span class="w">
              </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ExecuteCommandAgent"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"lastStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RUNNING"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">],</span><span class="w">
          </span><span class="nl">"cpu"</span><span class="p">:</span><span class="w"> </span><span class="s2">"256"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"memory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"512"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"cpu"</span><span class="p">:</span><span class="w"> </span><span class="s2">"256"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="mf">1708944469.064</span><span class="p">,</span><span class="w">
      </span><span class="nl">"desiredStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RUNNING"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"enableExecuteCommand"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"group"</span><span class="p">:</span><span class="w"> </span><span class="s2">"service:xxxxxx-fg-svc"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"healthStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HEALTHY"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"lastStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RUNNING"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"launchType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FARGATE"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"memory"</span><span class="p">:</span><span class="w"> </span><span class="s2">"512"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"overrides"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"containerOverrides"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxxxxx"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"inferenceAcceleratorOverrides"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"platformVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.4.0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"platformFamily"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Linux"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pullStartedAt"</span><span class="p">:</span><span class="w"> </span><span class="mf">1708944483.325</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pullStoppedAt"</span><span class="p">:</span><span class="w"> </span><span class="mf">1708944500.38</span><span class="p">,</span><span class="w">
      </span><span class="nl">"startedAt"</span><span class="p">:</span><span class="w"> </span><span class="mf">1708944509.874</span><span class="p">,</span><span class="w">
      </span><span class="nl">"startedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ecs-svc/xxxxxx"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"taskArn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:aws:ecs:eu-west-1:123456789012:task/fargate-cluster/xxxxxx"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"taskDefinitionArn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"arn:aws:ecs:eu-west-1:123456789012:task-definition/xxxxxx-fg-task:16"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ephemeralStorage"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"sizeInGiB"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"failures"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><h2 id="references-links"><span class="me-2">References (Links)</span><a href="#references-links" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/install-plugin-macos-overview.html">https://docs.aws.amazon.com/systems-manager/latest/userguide/install-plugin-macos-overview.html</a><li><a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/install-plugin-verify.html">https://docs.aws.amazon.com/systems-manager/latest/userguide/install-plugin-verify.html</a><li><a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-exec.html#ecs-exec-required-iam-permissions">https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-exec.html#ecs-exec-required-iam-permissions</a><li><a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager.html">https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager.html</a><li><a href="https://aws.amazon.com/blogs/aws/new-port-forwarding-using-aws-system-manager-sessions-manager/">https://aws.amazon.com/blogs/aws/new-port-forwarding-using-aws-system-manager-sessions-manager/</a><li><a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager-working-with-sessions-start.html">https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager-working-with-sessions-start.html</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/aws/">aws</a>, <a href="/categories/ssm/">ssm</a>, <a href="/categories/ssh/">ssh</a>, <a href="/categories/security/">security</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/aws/" class="post-tag no-text-decoration" >aws</a> <a href="/tags/ssm/" class="post-tag no-text-decoration" >ssm</a> <a href="/tags/ssh/" class="post-tag no-text-decoration" >ssh</a> <a href="/tags/security/" class="post-tag no-text-decoration" >security</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=AWS%20SSM%20Session%20Manager%20as%20secure%20Hub%20to%20establish%20multiple%20Connections%20to%20instances%20and%20Port%20Forwarding%20-%20Engineer's%20Notes&url=https%3A%2F%2Ftsypuk.github.io%2Fposts%2F2024%2F02%2F11%2Fsystem-manager.html" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=AWS%20SSM%20Session%20Manager%20as%20secure%20Hub%20to%20establish%20multiple%20Connections%20to%20instances%20and%20Port%20Forwarding%20-%20Engineer's%20Notes&u=https%3A%2F%2Ftsypuk.github.io%2Fposts%2F2024%2F02%2F11%2Fsystem-manager.html" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Ftsypuk.github.io%2Fposts%2F2024%2F02%2F11%2Fsystem-manager.html&text=AWS%20SSM%20Session%20Manager%20as%20secure%20Hub%20to%20establish%20multiple%20Connections%20to%20instances%20and%20Port%20Forwarding%20-%20Engineer's%20Notes" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Ftsypuk.github.io%2Fposts%2F2024%2F02%2F11%2Fsystem-manager.html" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/2025/09/26/multiagnet-n8n-bedrock.html">Orchestrating AI multi-agent infrastructure with AWS Bedrock, OpenAI and n8n</a><li class="text-truncate lh-lg"> <a href="/posts/2025/07/20/elastic-cache-vector.html">Amazon ElastiCache Redis as a Vector Embeddings Storage for Semantic Search in AWS Community Blog posts</a><li class="text-truncate lh-lg"> <a href="/posts/2025/09/17/duckdb-s3.html">Running analytics queries from your machine with Zero-BigData stack needed on top of AWS S3(compressed JSON, Parquet, csv) or other DataSources</a><li class="text-truncate lh-lg"> <a href="/posts/2023/10/02/dynamo-design.html">DynamoDB Table Design Principles - NoSQL Modeling</a><li class="text-truncate lh-lg"> <a href="/posts/2023/10/04/dynamo-one-to-many.html">DynamoDB Table Design Principles - One-To-Many Relationships in NoSQL</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/aws/">aws</a> <a class="post-tag btn btn-outline-primary" href="/tags/dynamodb/">dynamodb</a> <a class="post-tag btn btn-outline-primary" href="/tags/git/">git</a> <a class="post-tag btn btn-outline-primary" href="/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/tags/s3/">s3</a> <a class="post-tag btn btn-outline-primary" href="/tags/ecs/">ecs</a> <a class="post-tag btn btn-outline-primary" href="/tags/network/">network</a> <a class="post-tag btn btn-outline-primary" href="/tags/cli/">cli</a> <a class="post-tag btn btn-outline-primary" href="/tags/fargate/">fargate</a> <a class="post-tag btn btn-outline-primary" href="/tags/firehose/">firehose</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/2024/02/04/ecs-exec.html" class="post-preview card h-100"><div class="card-body"> <time data-ts="1707055200" data-df="ll" > Feb 4, 2024 </time><h4 class="pt-0 my-2">Securely accessing ECS Fargate containers shell, without SSH or exposed ports</h4><div class="text-muted"><p>Abstract Very often as a SysOps or Developer we need login into running container in ECS cluster for troubleshooting or verification. To have such possibilities some companies are exposing 22 port...</p></div></div></a></article><article class="col"> <a href="/posts/2024/12/13/remote-debug-nodejs-with-ssm.html" class="post-preview card h-100"><div class="card-body"> <time data-ts="1734040800" data-df="ll" > Dec 13, 2024 </time><h4 class="pt-0 my-2">Remote Debugging/Profiling NodeJS app running in private ECS cluster using AWS SSM and inspect protocol</h4><div class="text-muted"><p>Debugging a Node.js application running inside a container within an ECS cluster can be daunting. The challenge becomes especially significant in restricted environments like AWS ECS, where you lac...</p></div></div></a></article><article class="col"> <a href="/posts/2023/02/08/aws-vpc-traffic-mirroring-ids-suricata.html" class="post-preview card h-100"><div class="card-body"> <time data-ts="1675850400" data-df="ll" > Feb 8, 2023 </time><h4 class="pt-0 my-2">AWS VPC traffic mirroring to IDS. Deep dive with Wireshark.</h4><div class="text-muted"><p>Abstract Traffic mirroring refers to the process of copying network traffic from one network port or interface to another for analysis, monitoring, or security purposes. There are multiple options...</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/2024/02/04/ecs-exec.html" class="btn btn-outline-primary" aria-label="Older" ><p>Securely accessing ECS Fargate containers shell, without SSH or exposed ports</p></a> <a href="/posts/2024/02/18/asteriks-ec2.html" class="btn btn-outline-primary" aria-label="Newer" ><p>Open Sourced VoIP telephony Asterisk installation on AWS EC2 instance</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://www.linkedin.com/in/roman-tsypuk">Roman Tsypuk</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span> <span data-bs-toggle="tooltip" data-bs-placement="top" title="2025-09-26 20:11:52 +0300 &#013;be60bb44e6416aa69b8fd68791db025be40c523c">Build version: be60bb4</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.2.4" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/aws/">aws</a> <a class="post-tag btn btn-outline-primary" href="/tags/dynamodb/">dynamodb</a> <a class="post-tag btn btn-outline-primary" href="/tags/git/">git</a> <a class="post-tag btn btn-outline-primary" href="/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/tags/s3/">s3</a> <a class="post-tag btn btn-outline-primary" href="/tags/ecs/">ecs</a> <a class="post-tag btn btn-outline-primary" href="/tags/network/">network</a> <a class="post-tag btn btn-outline-primary" href="/tags/cli/">cli</a> <a class="post-tag btn btn-outline-primary" href="/tags/fargate/">fargate</a> <a class="post-tag btn btn-outline-primary" href="/tags/firehose/">firehose</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'tsypuk/tsypuk.github.io', 'data-repo-id': 'R_kgDOIxaFiw', 'data-category': 'General', 'data-category-id': 'DIC_kwDOIxaFi84CUSfn', 'data-mapping': 'og:title', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'top', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{content}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
